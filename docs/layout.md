## Разработка топологии

### Запуск OpenROAD

1. В терминале перейдите в папку work/layout с помощью следующей команды (данная команда также создаст нужную папку если она отстутствует):

```bash
mkdir -p ../layout && cd ../layout
```

и запустите команду:

```bash
openroad -gui -log log.txt
```

Данная команда запустит САПР OpenRoad в режиме графического интерфейса, а также создаст файл log.txt куда будут записываться результаты выполнения команд.

2. Ознакомимся с интерфейсом OpenRoad:

![](images/roadGUI.png)

На рисунке ниже обозначены основные элементы графического интерфейса САПР:

![](images/openRoadGuiMark.jpg)


Нижняя часть графического интерфейса, по сути, представляет собой терминал, в котором и будет происходить основная работа над топологией блока

### Загрузка проекта в OpenROAD

3. В командной строке OpenROAD запустите команду:

```tcl
source ../../scr/layout/load_design.tcl
```

Произойдет исполнение скрипта load_design.tcl, имеющего следующее содержание:

```tcl
############################################################################################
#set units and define corner
set_cmd_units -time ns -capacitance pF -current mA -voltage V -resistance kOhm -distance um
define_corners typical
############################################################################################

############################################################################################
#Read LEF files
read_lef ../../lefs/sky130.tlef ; # Techlef

read_lef ../../lefs/sky130_fd_sc_hd.lef ; # load all cell lefs
############################################################################################

############################################################################################
# Read LIB file
read_liberty -corner typical ../../lib/sky130_fd_sc_hd__tt_025C_1v80.lib
############################################################################################

############################################################################################
# Read the netlist
read_verilog ../syn/segment_seconds_netlist.v
link_design seven_segment_seconds
############################################################################################

############################################################################################
# Read SDC file
read_sdc ../../scr/sdc/const.sdc
############################################################################################
```

Данный скрипт задает некоторые начальные настройки, а затем последовательно загружает LEF  и LIB файлы, полученный после логического синтеза нетлист, а также SDC файл. Несколько LIB файлов позволят выполнить статический временной анализ с учетом PVT вариаций.

**Разработка floorplan**

**Установка размеров блока**

4. Сверните OpenROAD, перейдите в директорию vlsi_be_labs/scr/layout (без использования текущей командной строки) и откройте файл set_fp.tcl. В начале скрипта необходимо задать значения переменных, определяющих размеры ядра блока:

```tcl
###########################################
#set the block size
set X_size xxx
set Y_size yyy
###########################################
```

5. Вместо xxx и yyy на 23 и 24 строках скрипта соответственно введите рассчитанные в задании 20 размеры блока и сохраните файл.

6. Вернитесь в OpenROAD и выполните команду:

```tcl
source ../../scr/layout/set_fp.tcl
```

Данная команда создаст фрейм блока и создаст ряды для дальнейшего размещения ячеек в соответствии с технологическим файлом.

В левой области контроля отображения элементов топологии (см.рис. выше) поставьте галочку у пункта Rows, тем самым включив отображение рядов стандартных ячеек.
В результате вы должны увидеть на экране фрейм блока с отображаемыми зеленым цветом рядами для размещения стандартных ячеек:


